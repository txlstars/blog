---
layout: post
title: 编写可读代码的艺术
---

## 代码应当易于理解
+ ### 这段代码容易理解吗?

---

## 代码应当易于理解
+ ### 代码的写法应当使别人理解它所需的时间最小化
+ ### 代码并不总是越小越好(用理解所花费的时间去衡量)
    + 有时过于紧凑的代码反而难以理解
+ ### 代码效率,更好的框架和代码易于理解并不冲突

---

## 表面层次的改进
+ ### 好的命名
+ ### 好的注释
+ ### 好的排版格式(可爱的空白符)
+ ### 由小到大，积少成多


## 把信息装到名字里
+ ### 把名字当作一条小小的注释
+ ### 选择专业的词
+ ### 避免泛泛的名字(tmp, retval, i, j)
    + 如果你要使用像tmp, it或者retval这样空泛的名字，那么你要有个很好的理由
    + 对于下标可以采用更具体一点的
+ ### 用具体的名字代替抽象的名字
    + 模糊含义拆分成多个具体的含义
+ ### 使用前缀或者后缀给名字附带更多的信息
    + 带单位的值如ms, mb, kbps, cw
    + 附带其他重要属性
    + 匈牙利表示法
+ ### 决定名字的长度
    + 名字长短和作用域大小的关系
    + 首字母缩略词和缩写(考虑团队成员是否能够理解这个名字的含义)
    + 丢掉没用的词(避免冗余)
+ ### 利用名字的格式来传递含义
    + 宏 DISALLOW_COPY_AND_ASSIGN
    + 成员变量 offset_
    + 类名 CamelCase
    + 变量名 lower_separated
    + 常量 kConstantName

---

## 不会误解的名字
+ ### 要多问自己几遍，这个名字会被别人解读成其他的含义吗？
+ ### 上限或下限最好用max(min)为前缀
+ ### 包含的范围用first和last
+ ### 包含/排除返回用begin和end
+ ### 布尔值命名时使用is,has,can,should等，避免使用反义的词(disable)等
+ ### 要小心用户对特定词的期望。如get和size是轻量的方法
+ ### 权衡多个备选的名字

---

## 审美
+ ### 基本原则
    + 使用一致的布局，让读者很快就习惯这种风格
    + 让相似的代码看上去相似
    + 把相关的代码行分组，形成代码块
    + 审美与设计
+ ### 重新安排换行来保持一致和紧凑
+ ### 在需要时使用列对齐
+ ### 用方法整理不规则的东西(函数提取重复部分)
+ ### 把声明按块组织起来, 空行划分(如类的.h文件函数声明按功能划分)
+ ### 使用空行把代码分成"段落"(每个"段落"尝试加一个注释)
+ ### 选一个有意义的顺序，始终一致地使用它
+ ### 一致的风格比"正确"的风格更重要(团队代码风格一致性)

---

## 该写什么样的注释
+ ### 注释的目的：尽量帮助读者了解和作者一样多 
+ ### 什么不需要注释
    + 不要为那些从代码本身就能"快速"推断的事实写注释(快速很重要)
    + 不要为了注释而注释(如果想要注释，最好能给出比函数定义更多重要的细节)
    + 不要给不好的名字加注释-应该吧名字改好(好代码>坏代码+好注释)
+ ### 记录你的思想
    + 你应该在代码中加入注释来记录你对代码有价值的见解
    + 为代码中的瑕疵写注释
    + 给常量加注释
    

| 标记   | 通常的意义                               | 
|:-------|:-----------------------------------------|
| TODO:  | 我还没有处理的事情                       |
| FIXME: | 已知的无法运行的代码                     |
| HACK:  | 对一个问题不得不采用的比较粗糙的解决方案 |
| XXX:   | 危险！这里有重要的问题                   |

---
