---
layout: post
title: 无锁编程笔记
---

时钟周期->状态周期(s周期)->机器周期(ns级别)->指令周期
总线周期(lock 锁总线->锁缓存)

+ 常用锁 互斥锁,读写锁,自旋锁
+ 少锁(单例模式)
+ 原子操作(lock)
+ CAS操作(lock)
+ 一读一写 无锁

内存栅栏(10ns)
内存时延(10ns)

lock volatile

线程切换条件

缓存行字节大小

原子性|可见性|有序性

重排序不会影响单线程程序的执行

volatile(编译器层面的优化) 和cpu没有任何关系, 无法解决编译器层面的问题(无有序&无可见)
__volatile__ 提醒编译器不要优化

内存屏障(cpu硬件层面的 不会乱序执行) 有序+可见

lock 包含了内存屏障, 同时锁住了总线 原子+有序+可见

乱序执行(cpu执行速度和读取内存之间的差异)


缓存一致性协议:MESI

gcc objdump反汇编

EhCache／MapDB／Guava Cache

